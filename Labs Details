-- Create table
create table TECH2_DIM_DATE_TIME
(
  date_time_key           NUMBER not null,
  time_hour               VARCHAR2(2),
  full_date_alternate_key DATE,
  short_day_name          VARCHAR2(3),
  day_name                VARCHAR2(10),
  day_number_of_week      NUMBER,
  day_number_of_month     NUMBER,
  day_number_of_year      NUMBER,
  previous_day            DATE,
  next_day                DATE,
  week_number_of_year     NUMBER,
  week_number_of_month    NUMBER,
  month_name              VARCHAR2(10),
  month_number_of_year    NUMBER,
  quarter_number_of_year  NUMBER,
  calender_year           NUMBER not null,
  calender_semester       VARCHAR2(10),
  weenkend_flag           NUMBER,
  holiday_flag            NUMBER,
  current_day             DATE not null,
  year_time_span          NUMBER,
  quarter_time_span       NUMBER,
  month_time_span         NUMBER,
  day_time_span           NUMBER,
  hour_time_span          NUMBER,
  year_end_date           DATE,
  quarter_end_date        DATE,
  month_end_date          DATE,
  day_end_date            DATE,
  hour_end_date           DATE,
  real_month              VARCHAR2(10) not null,
  real_quarter            VARCHAR2(10) not null,
  real_month_date         DATE,
  real_quarter_date       DATE,
  real_year_date          DATE,
  char_day                CHAR(10)
)
tablespace TECH_DATA_TS
  pctfree 0
  initrans 1
  maxtrans 255
  storage
  (
    initial 64K
    next 1M
    minextents 1
    maxextents unlimited
  )
compress;
-- Create/Recreate indexes 
create bitmap index IDX_CURRENT_DAY on TECH2_DIM_DATE_TIME (CURRENT_DAY)
  tablespace TECH_IDX_TS
  pctfree 10
  initrans 2
  maxtrans 255
  storage
  (
    initial 64K
    next 1M
    minextents 1
    maxextents unlimited
  );
create bitmap index INDX_MTH on TECH2_DIM_DATE_TIME (REAL_MONTH)
  tablespace TECH_IDX_TS
  pctfree 10
  initrans 2
  maxtrans 255
  storage
  (
    initial 64K
    next 1M
    minextents 1
    maxextents unlimited
  );
create bitmap index INDX_YR on TECH2_DIM_DATE_TIME (CALENDER_YEAR)
  tablespace TECH_IDX_TS
  pctfree 10
  initrans 2
  maxtrans 255
  storage
  (
    initial 64K
    next 1M
    minextents 1
    maxextents unlimited
  );
-- Create/Recreate primary, unique and foreign key constraints 
alter table TECH2_DIM_DATE_TIME
  add constraint PK_TECH2_DIM_DATE_TIME primary key (DATE_TIME_KEY)
  using index 
  tablespace TECH_IDX_TS
  pctfree 10
  initrans 2
  maxtrans 255
  storage
  (
    initial 64K
    next 1M
    minextents 1
    maxextents unlimited
  );
